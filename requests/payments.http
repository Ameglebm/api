@baseUrl = http://localhost:3000

### üé¨ PAYMENTS ‚Äî Confirma√ß√£o de Pagamento

### [1] Setup: Criar sess√£o com 20 assentos
# @name createSession
POST {{baseUrl}}/sessions
Content-Type: application/json

{
  "movie": "Interestelar",
  "room": "Sala 7",
  "startsAt": "2026-03-01T19:00:00.000Z",
  "ticketPrice": 25.00,
  "totalSeats": 20
}

###

### [2] Listar assentos da sess√£o
# @name listSeats
@sessionId = {{createSession.response.body.id}}
GET {{baseUrl}}/seats/{{sessionId}}

###

### [3] Criar reserva ‚Üê rode [1] e [2] antes
# @name createReservation
POST {{baseUrl}}/reservations
Content-Type: application/json

{
  "seatId": "{{listSeats.response.body.0.id}}",
  "userId": "usuario-001"
}

###

### [4] ‚úÖ Confirmar pagamento (dentro dos 30s) ‚Üê rode [3] e execute R√ÅPIDO
# @name confirmPayment
@reservationId = {{createReservation.response.body.id}}
POST {{baseUrl}}/payments/confirm/{{reservationId}}

###

### [5] Verificar assento virou SOLD
GET {{baseUrl}}/seats/{{sessionId}}

###

### [6] ‚ùå Confirmar mesma reserva de novo ‚Üí 409
POST {{baseUrl}}/payments/confirm/{{reservationId}}

###

### [7] ‚ùå ReservationId inexistente ‚Üí 404
POST {{baseUrl}}/payments/confirm/00000000-0000-0000-0000-000000000000

###

### [8] Setup: Nova reserva para teste de expira√ß√£o
# @name expireReservation
POST {{baseUrl}}/reservations
Content-Type: application/json

{
  "seatId": "{{listSeats.response.body.1.id}}",
  "userId": "usuario-002"
}

###

### [9] ‚è≥ ESPERE 31 SEGUNDOS antes de rodar o [10]

###

### [10] ‚ùå Confirmar reserva expirada ‚Üí 410 Gone
@expiredReservationId = {{expireReservation.response.body.id}}
POST {{baseUrl}}/payments/confirm/{{expiredReservationId}}